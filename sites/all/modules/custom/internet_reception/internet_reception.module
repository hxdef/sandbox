<?php/** * *//** * Implements hook_menu(). */function internet_reception_menu() {  $items = array();  $items['internet_reception'] = array(    'title' => 'Internet reception',    'page callback' => 'drupal_get_form',    'page arguments' => array('internet_reception_form'),    'access callback' => TRUE,    'menu_name' => 'main-menu',  );  return $items;}/** * Implements hook_form(). */function internet_reception_form() {  $form = array();  $form['full_name'] = array(    '#type' => 'textfield',    '#title' => t('Full name'),    '#required' => TRUE,  );  $form['age'] = array(    '#type' => 'textfield',    '#title' => t('Age'),    '#required' => TRUE,  );  $form['theme'] = array(    '#type' => 'textfield',    '#title' => t('Theme message:'),    '#required' => TRUE,  );  $form['message'] = array(    '#type' => 'textarea',    '#title' => t('Your message:'),    '#required' => TRUE,  );  $form['submit'] = array(    '#type' => 'submit',    '#value' => t('Send!'),  );  return $form;}/** * Validate function for internet_reception_page_form. * @param $form * @param $form_state */function internet_reception_form_validate($form, $form_state) {  if ($form_state['values']['age'] <= -1) {    form_set_error('age', t('Age can not be negative'));  }  if ($form_state['values']['age'] == 0) {    form_set_error('age', t('Age is not equal to 0'));  }  if (ctype_alnum($form_state['values']['age'] == 0)) {    form_set_error('age', t('Only numbers!'));  }  if (ctype_digit($form_state['values']['full_name'])) {    form_set_error('full_name', t('Only text!'));  }}/** * Implements hook_mail() * @param $key * @param $message * @param $params */function internet_reception_mail($key, &$message, $params) {  switch ($key) {    case 'internet_reception':      $message['subject'] = t('E-mail sent from @site-name', array('@site-name' => variable_get('site_name', 'Drupal')));      $message['body'][] = check_plain($params['full_name'], check_plain($params['age']), check_plain($params['theme']), check_plain($params['message']));      break;  }}/** * Send email function for internet reception. * @param $form_values */function internet_reception_mail_send($form_values) {  global $user;  $module = 'internet_reception';  $key = 'internet_reception';  $to = $user->mail;  $from = variable_get('site_mail', ini_get('sendmail_from'));  $params = $form_values;  $language = language_default();  $send = TRUE;  $result = drupal_mail($module, $key, $to, $language, $params, $from, $send);  if ($result['result'] == TRUE) {    drupal_set_message(t('Your message has been sent.'));  }  else {    drupal_set_message(t('There was a problem sending your message and it was not sent.'), 'error');  }}/** * Submit function for internet_reception_page_form. * @param $form * @param $form_state */function internet_reception_form_submit($form, &$form_state) {  internet_reception_mail_send($form_state['values']);}